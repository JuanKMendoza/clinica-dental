---
import "../styles/global.css";

interface Props {
  title: string;
  brandColor?: string; 
  logoUrl?: string | null;
  businessName: string;
}

const { title, brandColor, logoUrl, businessName } = Astro.props;

// Funci√≥n: Convierte HEX a RGB ("255 0 0") para Tailwind
const hexToRgb = (hex: string) => {
  // Limpiar hex
  const cleanHex = hex ? hex.replace('#', '').trim() : '';
  
  // Fallback a Azul si no hay color o es inv√°lido
  if (!/^[0-9A-F]{6}$/i.test(cleanHex)) return "37 99 235"; 

  const r = parseInt(cleanHex.substring(0, 2), 16);
  const g = parseInt(cleanHex.substring(2, 4), 16);
  const b = parseInt(cleanHex.substring(4, 6), 16);
  return `${r} ${g} ${b}`;
}

const brandRgb = hexToRgb(brandColor || "#2563EB");
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  
  <!-- üî• AQU√ç INYECTAMOS EL COLOR EN EL BODY -->
  <body 
    class="bg-gray-50 font-sans antialiased text-gray-900 min-h-screen flex flex-col"
    style={`--color-brand: ${brandRgb};`}
  >
    
    <!-- HEADER -->
    <header class="bg-white border-b border-gray-100 shadow-sm sticky top-0 z-50 h-16 md:h-20 flex items-center">
      <div class="max-w-5xl w-full mx-auto px-4 sm:px-6 flex items-center justify-between">
        
        <!-- Logo -->
        <div class="flex items-center gap-3">
          {logoUrl ? (
            <img src={logoUrl} alt={businessName} class="h-10 w-auto object-contain" />
          ) : (
            <div class="w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-brand-200 bg-brand-600">
              {businessName.charAt(0).toUpperCase()}
            </div>
          )}
          <span class="font-bold text-xl text-gray-900 tracking-tight leading-none">{businessName}</span>
        </div>

        <!-- Contacto (Opcional, igual que tu original) -->
         <a href="#contacto" class="hidden md:flex items-center gap-2 text-brand-600 font-semibold hover:bg-brand-50 px-4 py-2 rounded-lg transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z" clip-rule="evenodd" /></svg>
            Contacto
         </a>
      </div>
    </header>

    <main class="flex-1">
      <slot />
    </main>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-gray-100 py-8 mt-auto text-center">
      <p class="text-sm text-gray-400">
        Powered by <span class="font-bold text-gray-600">DentalApp</span>
      </p>
    </footer>

  </body>
</html>